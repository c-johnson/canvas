syntax = "proto3";

message Node {
  uint32 level = 1;
  bytes key = 2;
  bytes hash = 3;
  bytes value = 4;
}

message Request {
  uint32 seq = 1;

  message GetRootRequest {}

  message GetNodeRequest {
    uint32 level = 2;
    bytes key = 3;
  }

  message GetChildrenRequest {
    uint32 level = 2;
    bytes key = 3;
  }

  oneof request {
    GetRootRequest get_root = 2;
    GetNodeRequest get_node = 3;
    GetChildrenRequest get_children = 4;
  }
}

message Response {
  uint32 seq = 1;

  message GetRootResponse {
    Node root = 2;
  }

  message GetNodeResponse {
    Node node = 2;
  }

  message GetChildrenResponse {
    repeated Node children = 2;
  }

  oneof response {
    GetRootResponse get_root = 2;
    GetNodeResponse get_node = 3;
    GetChildrenResponse get_children = 4;
  }
}